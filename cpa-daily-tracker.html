<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CPA í•©ê²© ë¡œë“œë§µ â€” Daily Tracker</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700;900&family=JetBrains+Mono:wght@400;600&family=Playfair+Display:wght@700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --ink: #1a1a2e;
            --cream: #faf8f5;
            --accent: #2563eb;
            --accent-light: #dbeafe;
            --success: #059669;
            --warm: #f59e0b;
        }
        * { box-sizing: border-box; }
        body { font-family: 'Noto Sans KR', sans-serif; background: var(--cream); color: var(--ink); margin: 0; }
        .mono { font-family: 'JetBrains Mono', monospace; }
        .display { font-family: 'Playfair Display', serif; }

        @keyframes fadeUp { from { opacity: 0; transform: translateY(12px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes pulse-dot { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.4); } }
        @keyframes check-pop { 0% { transform: scale(0.8); } 50% { transform: scale(1.15); } 100% { transform: scale(1); } }
        @keyframes streak-glow { 0%, 100% { box-shadow: 0 0 0 0 rgba(37, 99, 235, 0); } 50% { box-shadow: 0 0 20px 4px rgba(37, 99, 235, 0.15); } }
        
        .fade-up { animation: fadeUp 0.5s ease both; }
        .fade-up-1 { animation-delay: 0.05s; }
        .fade-up-2 { animation-delay: 0.1s; }
        .fade-up-3 { animation-delay: 0.15s; }
        .fade-up-4 { animation-delay: 0.2s; }
        .check-pop { animation: check-pop 0.3s ease; }
        .streak-glow { animation: streak-glow 2s ease infinite; }

        .progress-ring { transition: stroke-dashoffset 0.8s cubic-bezier(0.4, 0, 0.2, 1); }
        
        .day-cell { transition: all 0.2s ease; }
        .day-cell:hover { transform: scale(1.12); }
        .day-cell.completed { background: var(--accent); color: white; }
        .day-cell.today { box-shadow: inset 0 0 0 2px var(--accent); }
        .day-cell.partial { background: var(--accent-light); color: var(--accent); }

        .task-check { transition: all 0.2s ease; cursor: pointer; }
        .task-check:hover { transform: scale(1.1); }
        .task-check.done { background: var(--success); border-color: var(--success); }
        .task-check.done svg { opacity: 1; }

        .card { background: white; border: 1px solid #e8e5e0; border-radius: 16px; }
        .card-dark { background: var(--ink); color: white; border-radius: 16px; }

        input:focus, textarea:focus { outline: none; box-shadow: 0 0 0 2px var(--accent); }

        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-thumb { background: #ccc; border-radius: 4px; }
    </style>
</head>
<body>
<div id="root"></div>
<script type="text/babel">
const { useState, useEffect, useMemo, useCallback, useRef } = React;

/* â”€â”€â”€ SVG Icons â”€â”€â”€ */
const Icons = {
    Check: ({s=18}) => <svg width={s} height={s} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="3" strokeLinecap="round"><polyline points="20 6 9 17 4 12"/></svg>,
    Plus: ({s=18}) => <svg width={s} height={s} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>,
    Minus: ({s=18}) => <svg width={s} height={s} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round"><line x1="5" y1="12" x2="19" y2="12"/></svg>,
    Flame: ({s=18}) => <svg width={s} height={s} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"/></svg>,
    Calendar: ({s=18}) => <svg width={s} height={s} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round"><rect x="3" y="4" width="18" height="18" rx="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>,
    Target: ({s=18}) => <svg width={s} height={s} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="6"/><circle cx="12" cy="12" r="2"/></svg>,
    Book: ({s=18}) => <svg width={s} height={s} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round"><path d="M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20"/></svg>,
    Clock: ({s=18}) => <svg width={s} height={s} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>,
    Trophy: ({s=18}) => <svg width={s} height={s} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"/><path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"/><path d="M4 22h16"/><path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20 7 22"/><path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20 17 22"/><path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"/></svg>,
    ChevronLeft: ({s=18}) => <svg width={s} height={s} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round"><polyline points="15 18 9 12 15 6"/></svg>,
    ChevronRight: ({s=18}) => <svg width={s} height={s} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round"><polyline points="9 18 15 12 9 6"/></svg>,
    Sparkle: ({s=18}) => <svg width={s} height={s} viewBox="0 0 24 24" fill="currentColor"><path d="M12 2L14.09 8.26L20 9.27L15.55 13.97L16.91 20L12 16.9L7.09 20L8.45 13.97L4 9.27L9.91 8.26L12 2Z"/></svg>,
    Edit: ({s=18}) => <svg width={s} height={s} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round"><path d="M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"/></svg>,
    Trash: ({s=16}) => <svg width={s} height={s} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round"><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/></svg>,
};

/* â”€â”€â”€ Helpers â”€â”€â”€ */
const today = () => { const d = new Date(); return `${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,'0')}-${String(d.getDate()).padStart(2,'0')}`; };
const dayNames = ['ì¼','ì›”','í™”','ìˆ˜','ëª©','ê¸ˆ','í† '];
const formatDate = (dateStr) => { const d = new Date(dateStr + 'T00:00:00'); return `${d.getMonth()+1}ì›” ${d.getDate()}ì¼ (${dayNames[d.getDay()]})`; };

/* â”€â”€â”€ Circular Progress â”€â”€â”€ */
const CircleProgress = ({ pct, size=64, stroke=5, color="#2563eb" }) => {
    const r = (size - stroke) / 2;
    const circ = 2 * Math.PI * r;
    const offset = circ - (pct / 100) * circ;
    return (
        <svg width={size} height={size} className="block">
            <circle cx={size/2} cy={size/2} r={r} fill="none" stroke="#e8e5e0" strokeWidth={stroke}/>
            <circle cx={size/2} cy={size/2} r={r} fill="none" stroke={color} strokeWidth={stroke}
                strokeDasharray={circ} strokeDashoffset={offset} strokeLinecap="round"
                className="progress-ring" transform={`rotate(-90 ${size/2} ${size/2})`}/>
            <text x="50%" y="50%" textAnchor="middle" dominantBaseline="central"
                className="mono" fill="var(--ink)" fontSize={size > 50 ? 14 : 11} fontWeight="600">{pct}%</text>
        </svg>
    );
};

/* â”€â”€â”€ Main App â”€â”€â”€ */
const App = () => {
    const [activeView, setActiveView] = useState('daily');
    const [selectedDate, setSelectedDate] = useState(today());
    const [calMonth, setCalMonth] = useState(() => { const d = new Date(); return { y: d.getFullYear(), m: d.getMonth() }; });
    const [showAddTask, setShowAddTask] = useState(false);
    const [newTaskText, setNewTaskText] = useState('');
    const [newTaskSubject, setNewTaskSubject] = useState('US Tax');

    // â”€â”€â”€ Core State â”€â”€â”€
    const [subjects, setSubjects] = useState([
        { id: 'tax', name: "US Tax", total: 47, current: 11, color: "#2563eb", icon: "ğŸ“˜" },
        { id: 'audit', name: "Audit 1", total: 37, current: 7, color: "#7c3aed", icon: "ğŸ“—" },
        { id: 'nfp', name: "NFP", total: 36, current: 2, color: "#059669", icon: "ğŸ“™" },
    ]);

    // dailyLogs: { "2026-02-18": { tasks: [{id, text, subject, done}], lecturesCompleted: {tax: 2, audit: 0, nfp: 1}, memo: "" } }
    const [dailyLogs, setDailyLogs] = useState(() => {
        // seed today with default tasks
        const t = today();
        return {
            [t]: {
                tasks: [
                    { id: '1', text: 'ì¤‘ê¸‰íšŒê³„ ì›œì—… (3~5ë¬¸ì œ)', subject: 'ê³µí†µ', done: false },
                    { id: '2', text: 'US Tax ê°•ì˜ 2ê°œ ìˆ˜ê°•', subject: 'US Tax', done: false },
                    { id: '3', text: 'Audit 1 ë³µìŠµ ë…¸íŠ¸ ì •ë¦¬', subject: 'Audit 1', done: false },
                    { id: '4', text: 'ì˜¤ëŠ˜ ë°°ìš´ ë‚´ìš© ë°±ì§€ ì¸ì¶œ', subject: 'ê³µí†µ', done: false },
                ],
                lecturesCompleted: { tax: 0, audit: 0, nfp: 0 },
                memo: '',
            }
        };
    });

    const getLog = (date) => dailyLogs[date] || { tasks: [], lecturesCompleted: { tax: 0, audit: 0, nfp: 0 }, memo: '' };
    const todayLog = getLog(selectedDate);
    const isToday = selectedDate === today();

    const updateLog = (date, updater) => {
        setDailyLogs(prev => {
            const current = prev[date] || { tasks: [], lecturesCompleted: { tax: 0, audit: 0, nfp: 0 }, memo: '' };
            return { ...prev, [date]: updater(current) };
        });
    };

    // Toggle task
    const toggleTask = (taskId) => {
        updateLog(selectedDate, log => ({
            ...log,
            tasks: log.tasks.map(t => t.id === taskId ? { ...t, done: !t.done } : t)
        }));
    };

    // Add task
    const addTask = () => {
        if (!newTaskText.trim()) return;
        const id = Date.now().toString();
        updateLog(selectedDate, log => ({
            ...log,
            tasks: [...log.tasks, { id, text: newTaskText.trim(), subject: newTaskSubject, done: false }]
        }));
        setNewTaskText('');
        setShowAddTask(false);
    };

    // Delete task
    const deleteTask = (taskId) => {
        updateLog(selectedDate, log => ({
            ...log,
            tasks: log.tasks.filter(t => t.id !== taskId)
        }));
    };

    // Update lectures completed
    const updateLectures = (subjectKey, delta) => {
        updateLog(selectedDate, log => ({
            ...log,
            lecturesCompleted: {
                ...log.lecturesCompleted,
                [subjectKey]: Math.max(0, (log.lecturesCompleted[subjectKey] || 0) + delta)
            }
        }));
    };

    // Update subject progress
    const updateSubjectProgress = (idx, delta) => {
        setSubjects(prev => prev.map((s, i) => {
            if (i === idx) {
                const nc = Math.max(0, Math.min(s.total, s.current + delta));
                return { ...s, current: nc };
            }
            return s;
        }));
    };

    // Update memo
    const updateMemo = (text) => {
        updateLog(selectedDate, log => ({ ...log, memo: text }));
    };

    // Stats
    const totalPct = useMemo(() => {
        const t = subjects.reduce((a, s) => a + s.total, 0);
        const c = subjects.reduce((a, s) => a + s.current, 0);
        return t ? Math.round((c / t) * 100) : 0;
    }, [subjects]);

    const todayCompletionPct = useMemo(() => {
        const tasks = todayLog.tasks;
        if (!tasks.length) return 0;
        return Math.round((tasks.filter(t => t.done).length / tasks.length) * 100);
    }, [todayLog]);

    // Streak calculation
    const streak = useMemo(() => {
        let count = 0;
        const d = new Date();
        // check if today is done, if not start from yesterday
        const todayStr = today();
        const todayL = getLog(todayStr);
        const todayDone = todayL.tasks.length > 0 && todayL.tasks.every(t => t.done);
        
        if (!todayDone) d.setDate(d.getDate() - 1);
        
        while (true) {
            const ds = `${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,'0')}-${String(d.getDate()).padStart(2,'0')}`;
            const log = getLog(ds);
            if (log.tasks.length > 0 && log.tasks.every(t => t.done)) {
                count++;
                d.setDate(d.getDate() - 1);
            } else {
                break;
            }
        }
        if (todayDone) count = Math.max(count, 1);
        return count;
    }, [dailyLogs]);

    // Calendar data
    const calDays = useMemo(() => {
        const { y, m } = calMonth;
        const firstDay = new Date(y, m, 1).getDay();
        const daysInMonth = new Date(y, m + 1, 0).getDate();
        const cells = [];
        for (let i = 0; i < firstDay; i++) cells.push(null);
        for (let d = 1; d <= daysInMonth; d++) {
            const ds = `${y}-${String(m+1).padStart(2,'0')}-${String(d).padStart(2,'0')}`;
            const log = getLog(ds);
            const hasTasks = log.tasks.length > 0;
            const allDone = hasTasks && log.tasks.every(t => t.done);
            const someDone = hasTasks && log.tasks.some(t => t.done) && !allDone;
            cells.push({ day: d, date: ds, completed: allDone, partial: someDone, isToday: ds === today() });
        }
        return cells;
    }, [calMonth, dailyLogs]);

    const monthLabel = `${calMonth.y}ë…„ ${calMonth.m + 1}ì›”`;

    /* â”€â”€â”€ Schedule Template â”€â”€â”€ */
    const weeklySchedule = {
        1: { label: "ì›”", subject: "US Tax", tasks: ["ì¤‘ê¸‰íšŒê³„ ë³µìŠµ", "Tax ê°•ì˜ 1", "Tax ê°•ì˜ 2"] },
        2: { label: "í™”", subject: "NFP", tasks: ["NFP ê°•ì˜ 1", "NFP ê°•ì˜ 2", "íšŒê³„ ë³µìŠµ"] },
        3: { label: "ìˆ˜", subject: "US Tax", tasks: ["ì¤‘ê¸‰íšŒê³„ ë³µìŠµ", "Tax ê°•ì˜ 3", "Tax ê°•ì˜ 4"] },
        4: { label: "ëª©", subject: "Audit 1", tasks: ["íšŒê³„ ë³µìŠµ", "Audit ê°•ì˜ 1", "Audit ê°•ì˜ 2"] },
        5: { label: "ê¸ˆ", subject: "Audit 1", tasks: ["Audit ê°•ì˜ 3", "Audit ê°•ì˜ 4", "ê³ ê¸‰íšŒê³„"] },
        6: { label: "í† ", subject: "NFP", tasks: ["NFP ê°•ì˜ 3", "ì£¼ê°„ ì´ì •ë¦¬"] },
    };

    const generateDailyTasks = () => {
        const dow = new Date(selectedDate + 'T00:00:00').getDay();
        const sched = weeklySchedule[dow];
        if (!sched) return;
        const baseTasks = [
            { id: Date.now().toString(), text: 'ì¤‘ê¸‰íšŒê³„ ì›œì—… (3~5ë¬¸ì œ)', subject: 'ê³µí†µ', done: false },
            ...sched.tasks.map((t, i) => ({ id: (Date.now() + i + 1).toString(), text: t, subject: sched.subject, done: false })),
            { id: (Date.now() + 99).toString(), text: 'ì˜¤ëŠ˜ ë°°ìš´ ë‚´ìš© ë°±ì§€ ì¸ì¶œ', subject: 'ê³µí†µ', done: false },
        ];
        updateLog(selectedDate, log => ({ ...log, tasks: baseTasks }));
    };

    return (
        <div className="max-w-6xl mx-auto px-4 py-6 md:px-8 md:py-10">
            {/* Header */}
            <header className="mb-10 fade-up">
                <div className="flex flex-col md:flex-row justify-between items-start md:items-end gap-4">
                    <div>
                        <p className="mono text-xs tracking-widest text-gray-400 uppercase mb-1">Daily Study Tracker</p>
                        <h1 className="display text-4xl md:text-5xl font-black text-gray-900 leading-tight" style={{letterSpacing: '-0.02em'}}>
                            CPA í•©ê²© ë¡œë“œë§µ
                        </h1>
                    </div>
                    <div className="flex items-center gap-4">
                        {streak > 0 && (
                            <div className="flex items-center gap-2 px-4 py-2 rounded-full bg-amber-50 border border-amber-200 streak-glow">
                                <Icons.Flame s={18}/>
                                <span className="mono text-sm font-semibold text-amber-700">{streak}ì¼ ì—°ì†</span>
                            </div>
                        )}
                        <div className="flex items-center gap-2 px-4 py-2 rounded-full bg-blue-50 border border-blue-200">
                            <Icons.Target s={16}/>
                            <span className="mono text-sm font-semibold text-blue-700">ì „ì²´ {totalPct}%</span>
                        </div>
                    </div>
                </div>
            </header>

            {/* Subject Progress Cards */}
            <section className="grid grid-cols-1 md:grid-cols-3 gap-4 mb-10 fade-up fade-up-1">
                {subjects.map((s, idx) => {
                    const pct = Math.round((s.current / s.total) * 100);
                    return (
                        <div key={s.id} className="card p-5 flex items-center gap-5 group hover:shadow-md transition-shadow">
                            <CircleProgress pct={pct} size={58} stroke={5} color={s.color}/>
                            <div className="flex-grow min-w-0">
                                <div className="flex items-center gap-2 mb-1">
                                    <span className="text-lg">{s.icon}</span>
                                    <h3 className="font-bold text-gray-900">{s.name}</h3>
                                </div>
                                <p className="mono text-xs text-gray-400">{s.current} / {s.total}ê°• ì™„ë£Œ Â· ì”ì—¬ {s.total - s.current}ê°•</p>
                            </div>
                            <div className="flex flex-col gap-1 opacity-0 group-hover:opacity-100 transition-opacity">
                                <button onClick={() => updateSubjectProgress(idx, 1)}
                                    className="w-7 h-7 rounded-md bg-gray-900 text-white flex items-center justify-center hover:bg-blue-600 transition-colors">
                                    <Icons.Plus s={14}/>
                                </button>
                                <button onClick={() => updateSubjectProgress(idx, -1)}
                                    className="w-7 h-7 rounded-md border border-gray-200 text-gray-400 flex items-center justify-center hover:border-red-300 hover:text-red-400 transition-colors">
                                    <Icons.Minus s={14}/>
                                </button>
                            </div>
                        </div>
                    );
                })}
            </section>

            {/* Tab Navigation */}
            <nav className="flex gap-1 mb-8 p-1 bg-gray-100 rounded-xl w-fit fade-up fade-up-2">
                {[
                    { id: 'daily', label: 'ì˜¤ëŠ˜ì˜ ì²´í¬ë¦¬ìŠ¤íŠ¸', icon: <Icons.Check s={15}/> },
                    { id: 'calendar', label: 'ì¶œì„ ìº˜ë¦°ë”', icon: <Icons.Calendar s={15}/> },
                    { id: 'guide', label: 'í•™ìŠµ ê°€ì´ë“œ', icon: <Icons.Book s={15}/> },
                ].map(tab => (
                    <button key={tab.id} onClick={() => setActiveView(tab.id)}
                        className={`flex items-center gap-2 px-5 py-2.5 rounded-lg text-sm font-semibold transition-all ${
                            activeView === tab.id 
                                ? 'bg-white text-gray-900 shadow-sm' 
                                : 'text-gray-400 hover:text-gray-600'
                        }`}>
                        {tab.icon}{tab.label}
                    </button>
                ))}
            </nav>

            {/* â”€â”€â”€ Daily Checklist View â”€â”€â”€ */}
            {activeView === 'daily' && (
                <div className="grid grid-cols-1 lg:grid-cols-3 gap-6 fade-up fade-up-3">
                    {/* Main Checklist */}
                    <div className="lg:col-span-2 space-y-5">
                        {/* Date Header */}
                        <div className="flex items-center justify-between">
                            <div className="flex items-center gap-3">
                                <button onClick={() => {
                                    const d = new Date(selectedDate + 'T00:00:00');
                                    d.setDate(d.getDate() - 1);
                                    setSelectedDate(`${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,'0')}-${String(d.getDate()).padStart(2,'0')}`);
                                }} className="w-8 h-8 rounded-lg border flex items-center justify-center hover:bg-gray-50 transition-colors">
                                    <Icons.ChevronLeft s={16}/>
                                </button>
                                <div>
                                    <h2 className="text-xl font-bold text-gray-900">{formatDate(selectedDate)}</h2>
                                    {isToday && <span className="mono text-[10px] text-blue-600 font-semibold tracking-wider uppercase">Today</span>}
                                </div>
                                <button onClick={() => {
                                    const d = new Date(selectedDate + 'T00:00:00');
                                    d.setDate(d.getDate() + 1);
                                    setSelectedDate(`${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,'0')}-${String(d.getDate()).padStart(2,'0')}`);
                                }} className="w-8 h-8 rounded-lg border flex items-center justify-center hover:bg-gray-50 transition-colors">
                                    <Icons.ChevronRight s={16}/>
                                </button>
                                {!isToday && (
                                    <button onClick={() => setSelectedDate(today())}
                                        className="ml-2 text-xs text-blue-600 hover:underline font-medium">ì˜¤ëŠ˜ë¡œ ì´ë™</button>
                                )}
                            </div>
                            <div className="flex items-center gap-3">
                                <CircleProgress pct={todayCompletionPct} size={44} stroke={4} color={todayCompletionPct === 100 ? '#059669' : '#2563eb'}/>
                            </div>
                        </div>

                        {/* Task List */}
                        <div className="card overflow-hidden">
                            {todayLog.tasks.length === 0 ? (
                                <div className="p-10 text-center">
                                    <p className="text-gray-400 text-sm mb-4">ì´ ë‚ ì˜ ì²´í¬ë¦¬ìŠ¤íŠ¸ê°€ ë¹„ì–´ìˆìŠµë‹ˆë‹¤.</p>
                                    <button onClick={generateDailyTasks}
                                        className="px-5 py-2.5 bg-blue-600 text-white text-sm font-semibold rounded-xl hover:bg-blue-700 transition-colors">
                                        ğŸ“‹ ì‹œê°„í‘œ ê¸°ë°˜ ìë™ ìƒì„±
                                    </button>
                                </div>
                            ) : (
                                <div>
                                    {todayLog.tasks.map((task, i) => (
                                        <div key={task.id} className={`flex items-center gap-4 px-5 py-4 border-b border-gray-50 last:border-b-0 group transition-colors ${task.done ? 'bg-gray-50/50' : 'hover:bg-blue-50/30'}`}>
                                            <button onClick={() => toggleTask(task.id)}
                                                className={`task-check w-6 h-6 rounded-full border-2 flex items-center justify-center flex-shrink-0 ${
                                                    task.done ? 'done border-emerald-500 bg-emerald-500 text-white check-pop' : 'border-gray-300 hover:border-blue-400'
                                                }`}>
                                                {task.done && <Icons.Check s={13}/>}
                                            </button>
                                            <div className="flex-grow min-w-0">
                                                <p className={`text-sm font-medium transition-colors ${task.done ? 'text-gray-400 line-through' : 'text-gray-800'}`}>
                                                    {task.text}
                                                </p>
                                                <span className="mono text-[10px] text-gray-400 uppercase tracking-wider">{task.subject}</span>
                                            </div>
                                            <button onClick={() => deleteTask(task.id)}
                                                className="opacity-0 group-hover:opacity-60 hover:!opacity-100 text-red-400 transition-opacity p-1">
                                                <Icons.Trash s={14}/>
                                            </button>
                                        </div>
                                    ))}
                                </div>
                            )}
                            
                            {/* Add Task */}
                            {showAddTask ? (
                                <div className="p-4 border-t bg-gray-50/50 flex gap-2">
                                    <select value={newTaskSubject} onChange={e => setNewTaskSubject(e.target.value)}
                                        className="px-3 py-2 border rounded-lg text-xs bg-white font-medium">
                                        <option>US Tax</option><option>Audit 1</option><option>NFP</option><option>ê³µí†µ</option>
                                    </select>
                                    <input type="text" value={newTaskText} onChange={e => setNewTaskText(e.target.value)}
                                        onKeyDown={e => e.key === 'Enter' && addTask()}
                                        placeholder="í•  ì¼ì„ ì…ë ¥í•˜ì„¸ìš”..."
                                        className="flex-grow px-4 py-2 border rounded-lg text-sm bg-white"
                                        autoFocus/>
                                    <button onClick={addTask} className="px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-semibold hover:bg-blue-700 transition-colors">ì¶”ê°€</button>
                                    <button onClick={() => { setShowAddTask(false); setNewTaskText(''); }} className="px-3 py-2 text-gray-400 text-sm hover:text-gray-600">ì·¨ì†Œ</button>
                                </div>
                            ) : (
                                <button onClick={() => setShowAddTask(true)}
                                    className="w-full p-4 border-t text-sm text-gray-400 hover:text-blue-600 hover:bg-blue-50/30 transition-colors flex items-center justify-center gap-2 font-medium">
                                    <Icons.Plus s={16}/> í•  ì¼ ì¶”ê°€
                                </button>
                            )}
                        </div>

                        {/* Memo */}
                        <div className="card p-5">
                            <h4 className="text-xs font-bold text-gray-400 uppercase tracking-wider mb-3 flex items-center gap-2">
                                <Icons.Edit s={13}/> ì˜¤ëŠ˜ì˜ í•™ìŠµ ë©”ëª¨
                            </h4>
                            <textarea
                                value={todayLog.memo}
                                onChange={e => updateMemo(e.target.value)}
                                placeholder="ì˜¤ëŠ˜ ê³µë¶€í•˜ë©´ì„œ ëŠë‚€ ì , ì–´ë ¤ì› ë˜ ë¶€ë¶„, ë‚´ì¼ í•  ì¼ ë“±ì„ ê¸°ë¡í•˜ì„¸ìš”..."
                                rows={3}
                                className="w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl text-sm resize-none focus:bg-white transition-colors"
                            />
                        </div>
                    </div>

                    {/* Sidebar */}
                    <div className="space-y-5">
                        {/* Today's Lectures */}
                        <div className="card-dark p-6">
                            <h4 className="font-bold text-sm mb-4 flex items-center gap-2 text-gray-300 uppercase tracking-wider">
                                <Icons.Clock s={15}/> ì˜¤ëŠ˜ ìˆ˜ê°• í˜„í™©
                            </h4>
                            <div className="space-y-4">
                                {[
                                    { key: 'tax', label: 'US Tax', icon: 'ğŸ“˜' },
                                    { key: 'audit', label: 'Audit 1', icon: 'ğŸ“—' },
                                    { key: 'nfp', label: 'NFP', icon: 'ğŸ“™' },
                                ].map(s => (
                                    <div key={s.key} className="flex items-center justify-between">
                                        <span className="text-sm text-gray-300">{s.icon} {s.label}</span>
                                        <div className="flex items-center gap-2">
                                            <button onClick={() => updateLectures(s.key, -1)}
                                                className="w-7 h-7 rounded-md border border-gray-600 text-gray-400 flex items-center justify-center hover:border-gray-400 transition-colors">
                                                <Icons.Minus s={12}/>
                                            </button>
                                            <span className="mono text-lg font-bold text-white w-6 text-center">
                                                {todayLog.lecturesCompleted[s.key] || 0}
                                            </span>
                                            <button onClick={() => updateLectures(s.key, 1)}
                                                className="w-7 h-7 rounded-md bg-blue-600 text-white flex items-center justify-center hover:bg-blue-500 transition-colors">
                                                <Icons.Plus s={12}/>
                                            </button>
                                        </div>
                                    </div>
                                ))}
                            </div>
                            <div className="mt-4 pt-4 border-t border-gray-700">
                                <p className="mono text-xs text-gray-500">
                                    ì´ {Object.values(todayLog.lecturesCompleted).reduce((a,b)=>a+b, 0)}ê°• ìˆ˜ê°•
                                </p>
                            </div>
                        </div>

                        {/* Quick Stats */}
                        <div className="card p-6">
                            <h4 className="font-bold text-xs text-gray-400 uppercase tracking-wider mb-4">ë¹ ë¥¸ í†µê³„</h4>
                            <div className="space-y-3">
                                <div className="flex justify-between items-center">
                                    <span className="text-sm text-gray-600">ì˜¤ëŠ˜ ì™„ë£Œìœ¨</span>
                                    <span className="mono text-sm font-bold" style={{color: todayCompletionPct === 100 ? '#059669' : '#2563eb'}}>{todayCompletionPct}%</span>
                                </div>
                                <div className="flex justify-between items-center">
                                    <span className="text-sm text-gray-600">ì—°ì† í•™ìŠµì¼</span>
                                    <span className="mono text-sm font-bold text-amber-600">{streak}ì¼</span>
                                </div>
                                <div className="flex justify-between items-center">
                                    <span className="text-sm text-gray-600">ì „ì²´ ì§„ë„ìœ¨</span>
                                    <span className="mono text-sm font-bold text-blue-600">{totalPct}%</span>
                                </div>
                            </div>
                        </div>

                        {/* Motivation */}
                        {todayCompletionPct === 100 && (
                            <div className="card p-6 text-center border-emerald-200 bg-emerald-50/50">
                                <div className="text-3xl mb-2">ğŸ‰</div>
                                <p className="font-bold text-emerald-800 text-sm">ì˜¤ëŠ˜ í•  ì¼ì„ ëª¨ë‘ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤!</p>
                                <p className="text-xs text-emerald-600 mt-1">ë‚´ì¼ë„ ì´ íë¦„ì„ ì´ì–´ê°€ì„¸ìš”.</p>
                            </div>
                        )}
                    </div>
                </div>
            )}

            {/* â”€â”€â”€ Calendar View â”€â”€â”€ */}
            {activeView === 'calendar' && (
                <div className="fade-up fade-up-3 max-w-2xl">
                    <div className="card p-6 md:p-8">
                        <div className="flex items-center justify-between mb-6">
                            <button onClick={() => setCalMonth(p => { let m = p.m - 1, y = p.y; if (m < 0) { m = 11; y--; } return { y, m }; })}
                                className="w-9 h-9 rounded-lg border flex items-center justify-center hover:bg-gray-50">
                                <Icons.ChevronLeft s={16}/>
                            </button>
                            <h3 className="font-bold text-lg">{monthLabel}</h3>
                            <button onClick={() => setCalMonth(p => { let m = p.m + 1, y = p.y; if (m > 11) { m = 0; y++; } return { y, m }; })}
                                className="w-9 h-9 rounded-lg border flex items-center justify-center hover:bg-gray-50">
                                <Icons.ChevronRight s={16}/>
                            </button>
                        </div>

                        <div className="grid grid-cols-7 gap-1 mb-2">
                            {dayNames.map(d => (
                                <div key={d} className="text-center text-[10px] font-bold text-gray-400 uppercase py-2">{d}</div>
                            ))}
                        </div>

                        <div className="grid grid-cols-7 gap-1">
                            {calDays.map((cell, i) => {
                                if (!cell) return <div key={`e${i}`}/>;
                                return (
                                    <button key={cell.date} onClick={() => { setSelectedDate(cell.date); setActiveView('daily'); }}
                                        className={`day-cell w-full aspect-square rounded-xl flex items-center justify-center text-sm font-semibold relative ${
                                            cell.completed ? 'completed' : cell.partial ? 'partial' : cell.isToday ? 'today bg-white' : 'bg-gray-50 text-gray-600 hover:bg-gray-100'
                                        }`}>
                                        {cell.day}
                                        {cell.completed && <div className="absolute -top-0.5 -right-0.5 w-2.5 h-2.5 bg-emerald-400 rounded-full border-2 border-white"/>}
                                    </button>
                                );
                            })}
                        </div>

                        <div className="mt-6 pt-5 border-t border-gray-100 flex items-center gap-6 text-xs text-gray-500">
                            <span className="flex items-center gap-2"><span className="w-3 h-3 rounded bg-blue-600"/> ëª¨ë‘ ì™„ë£Œ</span>
                            <span className="flex items-center gap-2"><span className="w-3 h-3 rounded bg-blue-100 border border-blue-300"/> ë¶€ë¶„ ì™„ë£Œ</span>
                            <span className="flex items-center gap-2"><span className="w-3 h-3 rounded bg-gray-50 border-2 border-blue-500"/> ì˜¤ëŠ˜</span>
                        </div>
                    </div>
                </div>
            )}

            {/* â”€â”€â”€ Study Guide View â”€â”€â”€ */}
            {activeView === 'guide' && (
                <div className="fade-up fade-up-3 space-y-6 max-w-3xl">
                    <div className="card p-8">
                        <h3 className="display text-2xl font-black text-gray-900 mb-6 flex items-center gap-3">
                            <Icons.Target s={26}/> 2íšŒë… ì™„ì„± í•µì‹¬ ì „ëµ
                        </h3>
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-5">
                            {[
                                { title: "ğŸ’¡ ëŠ¥ë™ì  ì¸ì¶œ í•™ìŠµ", desc: "ê°•ì˜ë¥¼ ë“£ëŠ” ì‹œê°„ë³´ë‹¤ ë°°ìš´ ê²ƒì„ ë°±ì§€ì— ì¨ë³´ëŠ” ì¸ì¶œ(Output) ì‹œê°„ì´ ë” ì¤‘ìš”í•©ë‹ˆë‹¤. Auditì€ ë¦¬í¬íŠ¸ ì–‘ì‹ì„ ì§ì ‘ ì¨ë³´ì„¸ìš”.", bg: "bg-blue-50", border: "border-blue-100" },
                                { title: "âš–ï¸ ê· í˜• ì¡íŒ ë³µìŠµ", desc: "ì¤‘ê¸‰/ê³ ê¸‰íšŒê³„ ê°ê°ì„ ìƒì§€ ì•Šê¸° ìœ„í•´ ë§¤ì¼ ì•„ì¹¨ 'íšŒê³„ ì›œì—…' ì‹œê°„ì„ ì§€í‚¤ì„¸ìš”. í•˜ë£¨ 3~5ë¬¸ì œë©´ ì¶©ë¶„í•©ë‹ˆë‹¤.", bg: "bg-gray-50", border: "border-gray-200" },
                                { title: "ğŸ”¥ ì—°ì† í•™ìŠµì˜ í˜", desc: "ë§¤ì¼ ì²´í¬ë¦¬ìŠ¤íŠ¸ë¥¼ ì™„ë£Œí•˜ë©° ì—°ì† í•™ìŠµì¼ì„ ëŠ˜ë ¤ê°€ì„¸ìš”. ìŠµê´€ì´ ì‹¤ë ¥ì´ ë©ë‹ˆë‹¤. ìµœì†Œ 30ì¼ ì—°ì†ì„ ëª©í‘œë¡œ!", bg: "bg-amber-50", border: "border-amber-100" },
                                { title: "ğŸ“Š ë°ì´í„° ê¸°ë°˜ ê´€ë¦¬", desc: "ë§¤ì¼ ìˆ˜ê°• í˜„í™©ì„ ê¸°ë¡í•˜ê³ , ë©”ëª¨ë¥¼ ë‚¨ê¸°ì„¸ìš”. ì–´ë–¤ ê³¼ëª©ì´ ë°€ë¦¬ëŠ”ì§€ ë°ì´í„°ë¡œ í™•ì¸í•˜ë©´ ì¡°ì •ì´ ì‰¬ì›Œì§‘ë‹ˆë‹¤.", bg: "bg-emerald-50", border: "border-emerald-100" },
                            ].map(card => (
                                <div key={card.title} className={`p-5 rounded-2xl ${card.bg} border ${card.border}`}>
                                    <h4 className="font-bold text-gray-900 mb-2">{card.title}</h4>
                                    <p className="text-sm text-gray-600 leading-relaxed">{card.desc}</p>
                                </div>
                            ))}
                        </div>
                    </div>

                    <div className="card p-8">
                        <h3 className="font-bold text-lg mb-5 flex items-center gap-2">
                            <Icons.Calendar s={20}/> ì£¼ê°„ ì‹œê°„í‘œ
                        </h3>
                        <div className="grid grid-cols-2 md:grid-cols-3 gap-3">
                            {Object.entries(weeklySchedule).map(([dow, info]) => (
                                <div key={dow} className="border rounded-xl overflow-hidden">
                                    <div className="bg-gray-900 text-white px-4 py-2 text-sm font-bold">
                                        {info.label}ìš”ì¼ Â· {info.subject}
                                    </div>
                                    <div className="p-3 space-y-2">
                                        {info.tasks.map((t, i) => (
                                            <p key={i} className="text-xs text-gray-600 flex items-center gap-2">
                                                <span className="w-1 h-1 rounded-full bg-blue-400 flex-shrink-0"/>
                                                {t}
                                            </p>
                                        ))}
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>
                </div>
            )}

            {/* Footer */}
            <footer className="mt-16 text-center">
                <p className="mono text-[10px] text-gray-300 tracking-widest uppercase">CPA Daily Tracker â€” ë§¤ì¼ í•œ ê±¸ìŒì”©</p>
            </footer>
        </div>
    );
};

ReactDOM.createRoot(document.getElementById('root')).render(<App/>);
</script>
</body>
</html>
